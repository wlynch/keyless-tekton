apiVersion: tekton.dev/v1beta1
kind: Task
metadata:
  name: simple-build
spec:
  steps:
    - name: checkout
      image: distroless.dev/git
      workingdir: /workspace
      script: |
        git clone https://github.com/chainguard-dev/go-demo
    - name: build
      image: distroless.dev/ko
      workingDir: /workspace/go-demo
      env:
        - name: KO_DOCKER_REPO
          value: ttl.sh
      script: |
        ko build .
